<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <textarea placeholder="Content" id="content" rows="20">
{"title":"New Product Available","text":"HEY! Take a look at this brand new t-shirt!","image":"/images/noti-img.jpg","tag":"new-product","url":"/"}</textarea
      >
    </div>
    <div>
      <input type="text" placeholder="Subscription ID" id="id" />
      <button id="btn">Submit</button>
    </div>
  </body>
  <script>
    const inputId = document.getElementById("id");
    const inputContent = document.getElementById("content");
    const btn = document.getElementById("btn");

    const handleSubmit = () => {
      console.log(inputId.value);
      console.log(inputContent.value);

      var xhr = new XMLHttpRequest();
      xhr.open("POST", `/subscription/${inputId.value}/push`, true);
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.send(JSON.stringify({ data: JSON.parse(inputContent.value) }));
    };

    btn.addEventListener("click", handleSubmit);
  </script>
</html>
